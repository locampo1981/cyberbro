services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: cyberbro
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=production
      - ABUSEIPDB=${ABUSEIPDB:-}
      - ALIENVAULT=${ALIENVAULT:-}
      - CRIMINALIP_API_KEY=${CRIMINALIP_API_KEY:-}
      - CROWDSTRIKE_CLIENT_ID=${CROWDSTRIKE_CLIENT_ID:-}
      - CROWDSTRIKE_CLIENT_SECRET=${CROWDSTRIKE_CLIENT_SECRET:-}
      - CROWDSTRIKE_FALCON_BASE_URL=${CROWDSTRIKE_FALCON_BASE_URL:-}
      - GOOGLE_SAFE_BROWSING=${GOOGLE_SAFE_BROWSING:-}
      - IPINFO=${IPINFO:-}
      - MDE_CLIENT_ID=${MDE_CLIENT_ID:-}
      - MDE_CLIENT_SECRET=${MDE_CLIENT_SECRET:-}
      - MDE_TENANT_ID=${MDE_TENANT_ID:-}
      - MISP_API_KEY=${MISP_API_KEY:-}
      - MISP_URL=${MISP_URL:-}
      - OPENCTI_API_KEY=${OPENCTI_API_KEY:-}
      - OPENCTI_URL=${OPENCTI_URL:-}
      - SHODAN=${SHODAN:-}
      - THREATFOX=${THREATFOX:-}
      - VIRUSTOTAL=${VIRUSTOTAL:-}
      - WEBSCOUT=${WEBSCOUT:-}
      - CONFIG_PAGE_ENABLED=${CONFIG_PAGE_ENABLED:-false}
      - SSL_VERIFY=${SSL_VERIFY:-true}
      - PROXY_URL=${PROXY_URL:-}
      - GUI_CACHE_TIMEOUT=${GUI_CACHE_TIMEOUT:-1800}
      - API_CACHE_TIMEOUT=${API_CACHE_TIMEOUT:-86400}
      - GUI_ENABLED_ENGINES=${GUI_ENABLED_ENGINES:-}
      - SUPERVISORD_WORKERS_COUNT=${SUPERVISORD_WORKERS_COUNT:-1}
      - SUPERVISORD_THREADS_COUNT=${SUPERVISORD_THREADS_COUNT:-1}
      - SUPERVISORD_TIMEOUT=${SUPERVISORD_TIMEOUT:-120}
      - API_PREFIX=${API_PREFIX:-api}
      - MAX_FORM_MEMORY_SIZE=${MAX_FORM_MEMORY_SIZE:-1048576}
    restart: always
    volumes:
      - ./data:/app/data
      - ./logs:/var/log/cyberbro